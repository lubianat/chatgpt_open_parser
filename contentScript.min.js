'use strict';function extractTextAndDownload(){let d="";const f=document.querySelector("main .gap-1");f&&(d+=`# ${f.textContent.trim()}\n\n`);document.querySelectorAll("main .group .gap-3").forEach((g,c)=>{c=0===c%2?"**User**":"**ChatGPT**";let b="";"**User**"===c?b=g.textContent.trim()+"\n\n":g.querySelector(".markdown").childNodes.forEach(a=>{console.log(a);console.log(a.nodeName);if("PRE"===a.nodeName)(a=a.querySelector("code"))&&(b+="```\n"+a.textContent.trim()+"\n```\n");else if("P"===a.nodeName)b+=
a.textContent.trim()+"\n\n";else if("OL"===a.nodeName||"UL"===a.nodeName)a.querySelectorAll("li").forEach(h=>{let e=h.textContent.trim();h.querySelector("strong")&&(e="**"+e+"**");b+="- "+e+"\n"}),b+="\n"});d+=`${c}:\n${b}\n`});chrome.runtime.sendMessage({action:"download",text:d})}extractTextAndDownload();